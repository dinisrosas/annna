{"ast":null,"code":"import _defineProperty from \"/Users/dinis/Desktop/dev/annna/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _objectWithoutProperties from \"/Users/dinis/Desktop/dev/annna/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/dinis/Desktop/dev/annna/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/dinis/Desktop/dev/annna/components/marketing/Carousel.tsx\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { Box } from '@modulz/design-system';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContext } from '@radix-ui/react-context';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport debounce from 'lodash.debounce';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport smoothscroll from 'smoothscroll-polyfill';\n\nvar _createContext = createContext('Carousel'),\n    _createContext2 = _slicedToArray(_createContext, 2),\n    CarouselProvider = _createContext2[0],\n    useCarouselContext = _createContext2[1];\n\nexport var Carousel = function Carousel(props) {\n  _s();\n\n  var ref = useRef(null);\n\n  var children = props.children,\n      carouselProps = _objectWithoutProperties(props, [\"children\"]);\n\n  var slideListRef = useRef(null);\n\n  var _useState = useState({}),\n      _ = _useState[0],\n      force = _useState[1];\n\n  var _useState2 = useState(false),\n      nextDisabled = _useState2[0],\n      setNextDisabled = _useState2[1];\n\n  var _useState3 = useState(true),\n      prevDisabled = _useState3[0],\n      setPrevDisabled = _useState3[1];\n\n  var timeoutRef = useRef();\n  var navigationUpdateDelay = useRef(100);\n  useEffect(function () {\n    return smoothscroll.polyfill();\n  }, []);\n  var getSlideInDirection = useCallbackRef(function (direction) {\n    var _ref$current;\n\n    var slides = (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.querySelectorAll('[data-slide-intersection-ratio]');\n\n    if (slides) {\n      var slidesArray = Array.from(slides.values());\n\n      if (direction === 1) {\n        slidesArray.reverse();\n      }\n\n      return slidesArray.find(function (slide) {\n        return slide.dataset.slideIntersectionRatio !== '0';\n      });\n    }\n  });\n  var handleNextClick = useCallback(function () {\n    var nextSlide = getSlideInDirection(1);\n\n    if (nextSlide) {\n      var _slideListRef$current = slideListRef.current,\n          scrollLeft = _slideListRef$current.scrollLeft,\n          scrollWidth = _slideListRef$current.scrollWidth,\n          clientWidth = _slideListRef$current.clientWidth;\n      var itemWidth = nextSlide.clientWidth;\n      var itemsToScroll = itemWidth * 2.5 < document.documentElement.offsetWidth ? 2 : 1;\n      var nextPos = Math.floor(scrollLeft / itemWidth) * itemWidth + itemWidth * itemsToScroll;\n      slideListRef.current.scrollTo({\n        left: nextPos,\n        behavior: 'smooth'\n      }); // Disable previous & next buttons immediately\n\n      setPrevDisabled(nextPos <= 0);\n      setNextDisabled(scrollWidth - nextPos - clientWidth <= 0); // Wait for scroll animation to finish before the buttons *might* show up again\n\n      navigationUpdateDelay.current = 500;\n    }\n  }, [getSlideInDirection, setPrevDisabled]);\n  var handlePrevClick = useCallback(function () {\n    var prevSlide = getSlideInDirection(-1);\n\n    if (prevSlide) {\n      var _slideListRef$current2 = slideListRef.current,\n          scrollLeft = _slideListRef$current2.scrollLeft,\n          scrollWidth = _slideListRef$current2.scrollWidth,\n          clientWidth = _slideListRef$current2.clientWidth;\n      var itemWidth = prevSlide.clientWidth;\n      var itemsToScroll = itemWidth * 2.5 < document.documentElement.offsetWidth ? 2 : 1;\n      var nextPos = Math.ceil(scrollLeft / itemWidth) * itemWidth - itemWidth * itemsToScroll;\n      slideListRef.current.scrollTo({\n        left: nextPos,\n        behavior: 'smooth'\n      }); // Disable previous & next buttons immediately\n\n      setPrevDisabled(nextPos <= 0);\n      setNextDisabled(scrollWidth - nextPos - clientWidth <= 0); // Wait for scroll animation to finish before the buttons *might* show up again\n\n      navigationUpdateDelay.current = 500;\n    }\n  }, [getSlideInDirection, setPrevDisabled]);\n  useEffect(function () {\n    // Keep checking for whether we need to disable the navigation buttons, debounced\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    timeoutRef.current = setTimeout(function () {\n      requestAnimationFrame(function () {\n        if (slideListRef.current) {\n          var _slideListRef$current3 = slideListRef.current,\n              scrollLeft = _slideListRef$current3.scrollLeft,\n              scrollWidth = _slideListRef$current3.scrollWidth,\n              clientWidth = _slideListRef$current3.clientWidth;\n          setPrevDisabled(scrollLeft <= 0);\n          setNextDisabled(scrollWidth - scrollLeft - clientWidth <= 0);\n          navigationUpdateDelay.current = 100;\n        }\n      });\n    }, navigationUpdateDelay.current);\n  });\n  useEffect(function () {\n    var slidesList = slideListRef.current;\n\n    if (slidesList) {\n      var handleScrollStartAndEnd = debounce(function () {\n        return force({});\n      }, 100, {\n        leading: true,\n        trailing: true\n      });\n      slidesList.addEventListener('scroll', handleScrollStartAndEnd);\n      window.addEventListener('resize', handleScrollStartAndEnd);\n      force({});\n      return function () {\n        slidesList.removeEventListener('scroll', handleScrollStartAndEnd);\n        window.removeEventListener('resize', handleScrollStartAndEnd);\n      };\n    }\n  }, [slideListRef]);\n  return /*#__PURE__*/_jsxDEV(CarouselProvider, {\n    _: _,\n    nextDisabled: nextDisabled,\n    prevDisabled: prevDisabled,\n    slideListRef: slideListRef,\n    onNextClick: handleNextClick,\n    onPrevClick: handlePrevClick,\n    children: /*#__PURE__*/_jsxDEV(Box, _objectSpread(_objectSpread({}, carouselProps), {}, {\n      ref: ref,\n      children: children\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Carousel, \"zray/osbXjMZDtvGm12AoJ9HAUc=\", false, function () {\n  return [useCallbackRef];\n});\n\n_c = Carousel;\nexport var CarouselSlideList = function CarouselSlideList(props) {\n  _s2();\n\n  var context = useCarouselContext('CarouselSlideList');\n  var ref = React.useRef(null);\n  var composedRefs = useComposedRefs(ref, context.slideListRef);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dragStart = _React$useState2[0],\n      setDragStart = _React$useState2[1];\n\n  var handleMouseMove = useCallbackRef(function (event) {\n    if (ref.current) {\n      var distanceX = event.clientX - dragStart.pointerX;\n      ref.current.scrollLeft = dragStart.scrollX - distanceX;\n    }\n  });\n  var handleMouseUp = useCallbackRef(function () {\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    setDragStart(null);\n  });\n  return /*#__PURE__*/_jsxDEV(Box, _objectSpread(_objectSpread({}, props), {}, {\n    ref: composedRefs,\n    \"data-state\": dragStart ? 'dragging' : undefined,\n    onMouseDownCapture: composeEventHandlers(props.onMouseDownCapture, function (event) {\n      // Drag only if main mouse button was clicked\n      if (event.button === 0) {\n        document.addEventListener('mousemove', handleMouseMove);\n        document.addEventListener('mouseup', handleMouseUp);\n        setDragStart({\n          scrollX: event.currentTarget.scrollLeft,\n          pointerX: event.clientX\n        });\n      }\n    }),\n    onPointerDown: composeEventHandlers(props.onPointerDown, function (event) {\n      var element = event.target;\n      element.style.userSelect = 'none';\n      element.setPointerCapture(event.pointerId);\n    }),\n    onPointerUp: composeEventHandlers(props.onPointerUp, function (event) {\n      var element = event.target;\n      element.style.userSelect = '';\n      element.releasePointerCapture(event.pointerId);\n    })\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, _this);\n};\n\n_s2(CarouselSlideList, \"Q2S/didGt9pq95Cu6aHo6UK5WWs=\", false, function () {\n  return [useCarouselContext, useComposedRefs, useCallbackRef, useCallbackRef];\n});\n\n_c2 = CarouselSlideList;\nexport var CarouselSlide = function CarouselSlide(props) {\n  _s3();\n\n  var _props$as = props.as,\n      Comp = _props$as === void 0 ? Box : _props$as,\n      slideProps = _objectWithoutProperties(props, [\"as\"]);\n\n  var context = useCarouselContext('CarouselSlide');\n  var ref = useRef(null);\n\n  var _useState4 = useState(0),\n      intersectionRatio = _useState4[0],\n      setIntersectionRatio = _useState4[1];\n\n  var isDraggingRef = useRef(false);\n  useEffect(function () {\n    var observer = new IntersectionObserver(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 1),\n          entry = _ref2[0];\n\n      return setIntersectionRatio(entry.intersectionRatio);\n    }, {\n      root: context.slideListRef.current,\n      threshold: [0, 0.5, 1]\n    });\n    observer.observe(ref.current);\n    return function () {\n      return observer.disconnect();\n    };\n  }, [context.slideListRef]);\n  return /*#__PURE__*/_jsxDEV(Comp, _objectSpread(_objectSpread({}, slideProps), {}, {\n    ref: ref,\n    \"data-slide-intersection-ratio\": intersectionRatio,\n    onDragStart: function onDragStart(event) {\n      event.preventDefault();\n      isDraggingRef.current = true;\n    },\n    onClick: function onClick(event) {\n      if (isDraggingRef.current) {\n        event.preventDefault();\n      }\n    }\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, _this);\n};\n\n_s3(CarouselSlide, \"dmynqgg1fBJ2ldZItD8s5ZEynb0=\", false, function () {\n  return [useCarouselContext];\n});\n\n_c3 = CarouselSlide;\nexport var CarouselNext = function CarouselNext(props) {\n  _s4();\n\n  var _props$as2 = props.as,\n      Comp = _props$as2 === void 0 ? 'button' : _props$as2,\n      nextProps = _objectWithoutProperties(props, [\"as\"]);\n\n  var context = useCarouselContext('CarouselNext');\n  return /*#__PURE__*/_jsxDEV(Comp, _objectSpread(_objectSpread({}, nextProps), {}, {\n    onClick: function onClick() {\n      return context.onNextClick();\n    },\n    disabled: context.nextDisabled\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, _this);\n};\n\n_s4(CarouselNext, \"q4NTwSDEOmzFkaaDWQHAzbRNkh8=\", false, function () {\n  return [useCarouselContext];\n});\n\n_c4 = CarouselNext;\nexport var CarouselPrevious = function CarouselPrevious(props) {\n  _s5();\n\n  var _props$as3 = props.as,\n      Comp = _props$as3 === void 0 ? 'button' : _props$as3,\n      prevProps = _objectWithoutProperties(props, [\"as\"]);\n\n  var context = useCarouselContext('CarouselPrevious');\n  return /*#__PURE__*/_jsxDEV(Comp, _objectSpread(_objectSpread({}, prevProps), {}, {\n    onClick: function onClick() {\n      return context.onPrevClick();\n    },\n    disabled: context.prevDisabled\n  }), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, _this);\n};\n\n_s5(CarouselPrevious, \"q4NTwSDEOmzFkaaDWQHAzbRNkh8=\", false, function () {\n  return [useCarouselContext];\n});\n\n_c5 = CarouselPrevious;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Carousel\");\n$RefreshReg$(_c2, \"CarouselSlideList\");\n$RefreshReg$(_c3, \"CarouselSlide\");\n$RefreshReg$(_c4, \"CarouselNext\");\n$RefreshReg$(_c5, \"CarouselPrevious\");","map":{"version":3,"sources":["/Users/dinis/Desktop/dev/annna/components/marketing/Carousel.tsx"],"names":["React","Box","useComposedRefs","createContext","useCallbackRef","composeEventHandlers","debounce","useCallback","useEffect","useRef","useState","smoothscroll","CarouselProvider","useCarouselContext","Carousel","props","ref","children","carouselProps","slideListRef","_","force","nextDisabled","setNextDisabled","prevDisabled","setPrevDisabled","timeoutRef","navigationUpdateDelay","polyfill","getSlideInDirection","direction","slides","current","querySelectorAll","slidesArray","Array","from","values","reverse","find","slide","dataset","slideIntersectionRatio","handleNextClick","nextSlide","scrollLeft","scrollWidth","clientWidth","itemWidth","itemsToScroll","document","documentElement","offsetWidth","nextPos","Math","floor","scrollTo","left","behavior","handlePrevClick","prevSlide","ceil","clearTimeout","setTimeout","requestAnimationFrame","slidesList","handleScrollStartAndEnd","leading","trailing","addEventListener","window","removeEventListener","CarouselSlideList","context","composedRefs","dragStart","setDragStart","handleMouseMove","event","distanceX","clientX","pointerX","scrollX","handleMouseUp","undefined","onMouseDownCapture","button","currentTarget","onPointerDown","element","target","style","userSelect","setPointerCapture","pointerId","onPointerUp","releasePointerCapture","CarouselSlide","as","Comp","slideProps","intersectionRatio","setIntersectionRatio","isDraggingRef","observer","IntersectionObserver","entry","root","threshold","observe","disconnect","preventDefault","CarouselNext","nextProps","onNextClick","CarouselPrevious","prevProps","onPrevClick"],"mappings":"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","sourcesContent":["import React, { ReactType } from 'react';\nimport { Box } from '@modulz/design-system';\nimport { useComposedRefs } from '@radix-ui/react-compose-refs';\nimport { createContext } from '@radix-ui/react-context';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport debounce from 'lodash.debounce';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport smoothscroll from 'smoothscroll-polyfill';\n\nconst [CarouselProvider, useCarouselContext] = createContext<{\n  _: any;\n  slideListRef: React.RefObject<HTMLElement>;\n  onNextClick(): void;\n  onPrevClick(): void;\n  nextDisabled: boolean;\n  prevDisabled: boolean;\n}>('Carousel');\n\nexport const Carousel = (props) => {\n  const ref = useRef<React.ElementRef<typeof Box>>(null);\n  const { children, ...carouselProps } = props;\n  const slideListRef = useRef<HTMLElement>(null);\n  const [_, force] = useState({});\n  const [nextDisabled, setNextDisabled] = useState(false);\n  const [prevDisabled, setPrevDisabled] = useState(true);\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const navigationUpdateDelay = useRef(100);\n  useEffect(() => smoothscroll.polyfill(), []);\n\n  const getSlideInDirection = useCallbackRef((direction: 1 | -1) => {\n    const slides = ref.current?.querySelectorAll<HTMLElement>('[data-slide-intersection-ratio]');\n    if (slides) {\n      const slidesArray = Array.from(slides.values());\n\n      if (direction === 1) {\n        slidesArray.reverse();\n      }\n\n      return slidesArray.find((slide) => slide.dataset.slideIntersectionRatio !== '0');\n    }\n  });\n\n  const handleNextClick = useCallback(() => {\n    const nextSlide = getSlideInDirection(1);\n\n    if (nextSlide) {\n      const { scrollLeft, scrollWidth, clientWidth } = slideListRef.current;\n      const itemWidth = nextSlide.clientWidth;\n      const itemsToScroll = itemWidth * 2.5 < document.documentElement.offsetWidth ? 2 : 1;\n      const nextPos = Math.floor(scrollLeft / itemWidth) * itemWidth + itemWidth * itemsToScroll;\n      slideListRef.current.scrollTo({ left: nextPos, behavior: 'smooth' });\n\n      // Disable previous & next buttons immediately\n      setPrevDisabled(nextPos <= 0);\n      setNextDisabled(scrollWidth - nextPos - clientWidth <= 0);\n      // Wait for scroll animation to finish before the buttons *might* show up again\n      navigationUpdateDelay.current = 500;\n    }\n  }, [getSlideInDirection, setPrevDisabled]);\n\n  const handlePrevClick = useCallback(() => {\n    const prevSlide = getSlideInDirection(-1);\n    if (prevSlide) {\n      const { scrollLeft, scrollWidth, clientWidth } = slideListRef.current;\n      const itemWidth = prevSlide.clientWidth;\n      const itemsToScroll = itemWidth * 2.5 < document.documentElement.offsetWidth ? 2 : 1;\n      const nextPos = Math.ceil(scrollLeft / itemWidth) * itemWidth - itemWidth * itemsToScroll;\n      slideListRef.current.scrollTo({ left: nextPos, behavior: 'smooth' });\n\n      // Disable previous & next buttons immediately\n      setPrevDisabled(nextPos <= 0);\n      setNextDisabled(scrollWidth - nextPos - clientWidth <= 0);\n      // Wait for scroll animation to finish before the buttons *might* show up again\n      navigationUpdateDelay.current = 500;\n    }\n  }, [getSlideInDirection, setPrevDisabled]);\n\n  useEffect(() => {\n    // Keep checking for whether we need to disable the navigation buttons, debounced\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    timeoutRef.current = setTimeout(() => {\n      requestAnimationFrame(() => {\n        if (slideListRef.current) {\n          const { scrollLeft, scrollWidth, clientWidth } = slideListRef.current;\n          setPrevDisabled(scrollLeft <= 0);\n          setNextDisabled(scrollWidth - scrollLeft - clientWidth <= 0);\n          navigationUpdateDelay.current = 100;\n        }\n      });\n    }, navigationUpdateDelay.current);\n  });\n\n  useEffect(() => {\n    const slidesList = slideListRef.current;\n    if (slidesList) {\n      const handleScrollStartAndEnd = debounce(() => force({}), 100, {\n        leading: true,\n        trailing: true,\n      });\n      slidesList.addEventListener('scroll', handleScrollStartAndEnd);\n      window.addEventListener('resize', handleScrollStartAndEnd);\n      force({});\n      return () => {\n        slidesList.removeEventListener('scroll', handleScrollStartAndEnd);\n        window.removeEventListener('resize', handleScrollStartAndEnd);\n      };\n    }\n  }, [slideListRef]);\n\n  return (\n    <CarouselProvider\n      _={_}\n      nextDisabled={nextDisabled}\n      prevDisabled={prevDisabled}\n      slideListRef={slideListRef}\n      onNextClick={handleNextClick}\n      onPrevClick={handlePrevClick}\n    >\n      <Box {...carouselProps} ref={ref}>\n        {children}\n      </Box>\n    </CarouselProvider>\n  );\n};\n\nexport const CarouselSlideList = (props) => {\n  const context = useCarouselContext('CarouselSlideList');\n  const ref = React.useRef<React.ElementRef<typeof Box>>(null);\n  const composedRefs = useComposedRefs(ref, context.slideListRef);\n  const [dragStart, setDragStart] = React.useState(null);\n\n  const handleMouseMove = useCallbackRef((event) => {\n    if (ref.current) {\n      const distanceX = event.clientX - dragStart.pointerX;\n      ref.current.scrollLeft = dragStart.scrollX - distanceX;\n    }\n  });\n\n  const handleMouseUp = useCallbackRef(() => {\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    setDragStart(null);\n  });\n\n  return (\n    <Box\n      {...props}\n      ref={composedRefs}\n      data-state={dragStart ? 'dragging' : undefined}\n      onMouseDownCapture={composeEventHandlers(props.onMouseDownCapture, (event: MouseEvent) => {\n        // Drag only if main mouse button was clicked\n        if (event.button === 0) {\n          document.addEventListener('mousemove', handleMouseMove);\n          document.addEventListener('mouseup', handleMouseUp);\n          setDragStart({\n            scrollX: (event.currentTarget as HTMLElement).scrollLeft,\n            pointerX: event.clientX,\n          });\n        }\n      })}\n      onPointerDown={composeEventHandlers(props.onPointerDown, (event: PointerEvent) => {\n        const element = event.target as HTMLElement;\n        element.style.userSelect = 'none';\n        element.setPointerCapture(event.pointerId);\n      })}\n      onPointerUp={composeEventHandlers(props.onPointerUp, (event: PointerEvent) => {\n        const element = event.target as HTMLElement;\n        element.style.userSelect = '';\n        element.releasePointerCapture(event.pointerId);\n      })}\n    />\n  );\n};\n\nexport const CarouselSlide = (props) => {\n  const { as: Comp = Box, ...slideProps } = props;\n  const context = useCarouselContext('CarouselSlide');\n  const ref = useRef<React.ElementRef<typeof Box>>(null);\n  const [intersectionRatio, setIntersectionRatio] = useState(0);\n  const isDraggingRef = useRef(false);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => setIntersectionRatio(entry.intersectionRatio),\n      { root: context.slideListRef.current, threshold: [0, 0.5, 1] }\n    );\n    observer.observe(ref.current);\n    return () => observer.disconnect();\n  }, [context.slideListRef]);\n\n  return (\n    <Comp\n      {...slideProps}\n      ref={ref}\n      data-slide-intersection-ratio={intersectionRatio}\n      onDragStart={(event) => {\n        event.preventDefault();\n        isDraggingRef.current = true;\n      }}\n      onClick={(event) => {\n        if (isDraggingRef.current) {\n          event.preventDefault();\n        }\n      }}\n    />\n  );\n};\n\nexport const CarouselNext = (props) => {\n  const { as: Comp = 'button', ...nextProps } = props;\n  const context = useCarouselContext('CarouselNext');\n  return (\n    <Comp {...nextProps} onClick={() => context.onNextClick()} disabled={context.nextDisabled} />\n  );\n};\n\nexport const CarouselPrevious = (props) => {\n  const { as: Comp = 'button', ...prevProps } = props;\n  const context = useCarouselContext('CarouselPrevious');\n  return (\n    <Comp {...prevProps} onClick={() => context.onPrevClick()} disabled={context.prevDisabled} />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}